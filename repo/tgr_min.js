(()=>{"use strict";var e,t,s={512:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Collector=void 0;const r=s(951);t.Collector=class{list=[];_isDestroyed=!1;collect(...e){this._isDestroyed||this.list.push(...e)}unsubscribe(e){this._isDestroyed||(e?.unsubscribe(),(0,r.quickDeleteFromArray)(this.list,e))}unsubscribeAll(){if(!this._isDestroyed)for(;this.list.length>0;)this.unsubscribe(this.list.pop())}size(){return this._isDestroyed?0:this.list.length}destroy(){this.unsubscribeAll(),this.list.length=0,this.list=0,this._isDestroyed=!0}get isDestroyed(){return this._isDestroyed}}},817:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FilterSwitchCase=t.FilterCollection=void 0,t.FilterCollection=class{chainHandlers=[];pipeData={isBreakChain:!1,isAvailable:!1,payload:null};response={isOK:!1,payload:void 0};errorHandler;get isEmpty(){return!this.chainHandlers.length}push(e){return this.chainHandlers.push(e),this}filter(e){return this.push((t=>{e(t.payload)&&(t.isAvailable=!0)}))}pushFilters(e){if(!Array.isArray(e))return this;for(let t=0;t<e.length;t++)this.filter(e[t]);return this}switch(){return new s(this)}processChain(e){const t=this.chainHandlers,s=this.pipeData,r=this.response;r.isOK=!1,r.payload=void 0,s.payload=e,s.isBreakChain=!1;try{for(let e=0;e<t.length;e++){if(s.isAvailable=!1,t[e](s),!s.isAvailable)return r;if(s.isBreakChain)break}}catch(e){return this.errorHandler?this.errorHandler(e,"Filter.processChain ERROR:"):console.log("Filter.processChain ERROR:",e),r}return r.isOK=!0,r.payload=s.payload,r}addErrorHandler(e){this.errorHandler=e}};class s{pipe;caseCounter;constructor(e){this.pipe=e,this.caseCounter=e.chainHandlers.length?e.chainHandlers.length:0}case(e){this.caseCounter++;const t=this.caseCounter,s=this.pipe.chainHandlers;return s.push((r=>{r.isAvailable=!0,e(r.payload)&&(r.isBreakChain=!0),t!==s.length||r.isBreakChain||(r.isAvailable=!1)})),this}pushCases(e){if(!Array.isArray(e))return this;for(let t=0;t<e.length;t++)this.case(e[t]);return this}}t.FilterSwitchCase=s},951:(e,t)=>{function s(e){return"next"in e?t=>e.next(t):e}Object.defineProperty(t,"__esModule",{value:!0}),t.getListener=t.quickDeleteFromArray=t.deleteFromArray=t.sortDescending=t.sortAscending=void 0,t.sortAscending=(e,t)=>e.order>t.order?1:e.order<t.order?-1:0,t.sortDescending=(e,t)=>e.order>t.order?-1:e.order<t.order?1:0,t.deleteFromArray=function(e,t){const s=e.indexOf(t);return-1!==s&&(e.splice(s,1),!0)},t.quickDeleteFromArray=function(e,t){const s=e.indexOf(t);return-1!==s&&(e[s]=e[e.length-1],e.length=e.length-1,!0)},t.getListener=function(e){if(Array.isArray(e)){const t=[];for(let r=0;r<e.length;r++)t.push(s(e[r]));return e=>{for(let s=0;s<t.length;s++)t[s](e)}}return s(e)}},390:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Observable=void 0;const r=s(951),i=s(528),n=s(817);t.Observable=class{value;listeners=[];_isEnable=!0;_isDestroyed=!1;isNextProcess=!1;listenersForUnsubscribe=[];filterCase=new n.FilterCollection;constructor(e){this.value=e}addFilter(e){return e&&this.filterCase.addErrorHandler(e),this.filterCase}disable(){this._isEnable=!1}enable(){this._isEnable=!0}get isEnable(){return this._isEnable}next(e){if(!this._isDestroyed&&this._isEnable&&(this.filterCase.isEmpty||this.filterCase.processChain(e).isOK)){this.isNextProcess=!0,this.value=e;for(let t=0;t<this.listeners.length;t++)this.listeners[t].send(e);this.isNextProcess=!1,this.listenersForUnsubscribe.length&&this.handleListenersForUnsubscribe()}}stream(e){if(!this._isDestroyed&&this._isEnable)for(let t=0;t<e.length;t++)this.next(e[t])}handleListenersForUnsubscribe(){const e=this.listenersForUnsubscribe.length;for(let t=0;t<e;t++)this.unSubscribe(this.listenersForUnsubscribe[t]);this.listenersForUnsubscribe.length=0}unSubscribe(e){this._isDestroyed||(this.isNextProcess&&e?this.listenersForUnsubscribe.push(e):this.listeners&&(0,r.quickDeleteFromArray)(this.listeners,e))}destroy(){this.value=null,this.unsubscribeAll(),this.listeners=null,this._isDestroyed=!0}unsubscribeAll(){this._isDestroyed||(this.listeners.length=0)}getValue(){if(!this._isDestroyed)return this.value}size(){return this._isDestroyed?0:this.listeners.length}subscribe(e,t){if(!this.isSubsValid(e))return;const s=new i.SubscribeObject(this,!1);return this.addObserver(s,e,t),s}addObserver(e,t,s){e.subscribe(t,s),this.listeners.push(e)}isSubsValid(e){return!this._isDestroyed&&!!e}pipe(){if(this._isDestroyed)return;const e=new i.SubscribeObject(this,!0);return this.listeners.push(e),e}get isDestroyed(){return this._isDestroyed}}},735:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.OrderedObservable=void 0;const r=s(390),i=s(951),n=s(183);class o extends r.Observable{sortDirection=i.sortAscending;setAscendingSort(){return this.sortDirection=i.sortAscending,this.sortByOrder()}setDescendingSort(){return this.sortDirection=i.sortDescending,this.sortByOrder()}sortByOrder(){return!this._isDestroyed&&(this.listeners.sort(this.sortDirection),!0)}subscribe(e,t){if(!this.isSubsValid(e))return;const s=new n.OrderedSubscribeObject(this,!1);return this.addObserver(s,e,t),s}pipe(){if(this._isDestroyed)return;const e=new n.OrderedSubscribeObject(this,!0);return this.listeners.push(e),e}unSubscribe(e){this._isDestroyed||(this.isNextProcess&&e?this.listenersForUnsubscribe.push(e):this.listeners&&(0,i.deleteFromArray)(this.listeners,e))}}t.OrderedObservable=o},183:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.OrderedSubscribeObject=void 0;const r=s(528);class i extends r.SubscribeObject{constructor(e,t){super(e,t)}get order(){return this._order}set order(e){!this.observable||this.observable&&this.observable.isDestroyed?this._order=void 0:(this._order=e,this.observable.sortByOrder())}subscribe(e,t){return super.subscribe(e,t),this}setOnce(){return super.setOnce()}unsubscribeByNegative(e){return super.unsubscribeByNegative(e)}unsubscribeByPositive(e){return super.unsubscribeByPositive(e)}emitByNegative(e){return super.emitByNegative(e)}emitByPositive(e){return super.emitByPositive(e)}emitMatch(e){return super.emitMatch(e)}}t.OrderedSubscribeObject=i},375:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SwitchCase=t.Pipe=void 0,t.Pipe=class{chainHandlers=[];pipeData={isBreakChain:!1,isNeedUnsubscribe:!1,isAvailable:!1,payload:null};push(e){return this.chainHandlers.push(e),this}setOnce(){return this.push((e=>{this.listener(e.payload),e.isNeedUnsubscribe=!0}))}unsubscribeByNegative(e){return this.push((t=>{t.isAvailable=!0,e(t.payload)||(t.isNeedUnsubscribe=!0)}))}unsubscribeByPositive(e){return this.push((t=>{t.isAvailable=!0,e(t.payload)&&(t.isNeedUnsubscribe=!0)}))}unsubscribeBy(e){return this.unsubscribeByPositive(e)}emitByNegative(e){return this.push((t=>{e(t.payload)||(t.isAvailable=!0)}))}emitByPositive(e){return this.push((t=>{e(t.payload)&&(t.isAvailable=!0)}))}refine(e){return this.emitByPositive(e)}pushRefiners(e){if(!Array.isArray(e))return this;for(let t=0;t<e.length;t++)this.emitByPositive(e[t]);return this}emitMatch(e){return this.push((t=>{e(t.payload)==t.payload&&(t.isAvailable=!0)}))}switch(){return new s(this)}then(e){return this.push((t=>{t.payload=e(t.payload),t.isAvailable=!0}))}serialize(){return this.push((e=>{e.payload=JSON.stringify(e.payload),e.isAvailable=!0}))}deserialize(){return this.push((e=>{e.payload=JSON.parse(e.payload),e.isAvailable=!0}))}processChain(e){const t=this.chainHandlers,s=this.pipeData;for(let e=0;e<t.length;e++){if(s.isNeedUnsubscribe=!1,s.isAvailable=!1,t[e](s),s.isNeedUnsubscribe)return this.unsubscribe();if(!s.isAvailable)return;if(s.isBreakChain)break}return e(s.payload)}};class s{pipe;caseCounter;constructor(e){this.pipe=e,this.caseCounter=e.chainHandlers.length?e.chainHandlers.length:0}subscribe(e,t){return this.pipe.subscribe(e,t)}case(e){this.caseCounter++;const t=this.caseCounter,s=this.pipe.chainHandlers;return s.push((r=>{r.isAvailable=!0,e(r.payload)&&(r.isBreakChain=!0),t!==s.length||r.isBreakChain||(r.isAvailable=!1)})),this}pushCases(e){if(!Array.isArray(e))return this;for(let t=0;t<e.length;t++)this.case(e[t]);return this}}t.SwitchCase=s},528:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SubscribeObject=void 0;const r=s(375),i=s(951);class n extends r.Pipe{observable;listener;errorHandler=(e,t)=>{console.log(`(Unit of SubscribeObject).send(${e}) ERROR:`,t)};_order=0;isPaused=!1;isPipe=!1;constructor(e,t){super(),this.observable=e,this.isPipe=!!t}subscribe(e,t){return this.listener=(0,i.getListener)(e),t&&(this.errorHandler=t),this}unsubscribe(){this.observable&&(this.observable.unSubscribe(this),this.observable=null,this.listener=null,this.chainHandlers.length=0)}send(e){try{this.pipeData.payload=e,this.pipeData.isBreakChain=!1,this.processValue(e)}catch(t){this.errorHandler(e,t)}}resume(){this.isPaused=!1}pause(){this.isPaused=!0}get order(){return this._order}set order(e){this._order=e}processValue(e){const t=this.listener;return t?this.observable&&!this.isPaused?this.isPipe?this.processChain(t):t(e):void 0:this.unsubscribe()}}t.SubscribeObject=n},47:(e,t,s)=>{t.cP=void 0;var r=s(390);Object.defineProperty(t,"cP",{enumerable:!0,get:function(){return r.Observable}});s(735),s(512),s(951),s(951)}},r={};function i(e){var t=r[e];if(void 0!==t)return t.exports;var n=r[e]={exports:{}};return s[e](n,n.exports,i),n.exports}function n(e){return{isApplied:!0,state:e}}function o(e){return{isApplied:!1,state:e}}function a(e,t){return e>t?e:t}function u(e,t){return 0===e?t:0===t?e:e>t?t:e}function h(e,t){return Math.round((e+t)/2)}!function(e){e.INIT="INIT",e.STARTED="STARTED",e.STOPPED="STOPPED",e.PROCESS="PROCESS",e.DESTROYED="DESTROYED",e.UNDEFINED="UNDEFINED",e.DELETED="DELETED",e.READY="READY"}(e||(e={})),function(e){e.NEGATIVE_DELAY="Delay must be a positive number.",e.TYPE_INVALID="TYPE_INVALID",e.NAME_IS_NOT_PRESENT="NAME_IS_NOT_PRESENT",e.INSTANCE_DESTROYED="INSTANCE_DESTROYED"}(t||(t={}));var c=i(390);class l{constructor(){this.state$=new c.Observable(e.UNDEFINED)}get state(){return this.state$.isDestroyed?e.DESTROYED:this.state$.getValue()??e.UNDEFINED}start(){if(this.isDestroyed())return o(e.DESTROYED);const t=this.startProcess();return t.isApplied?this.getPositive(t):t}stop(){if(this.isDestroyed())return o(e.DESTROYED);const t=this.stopProcess();return t.isApplied?this.getPositive(t):t}destroy(){return this.stop(),this.state$.next(e.DESTROYED),this.state$.destroy(),n(e.DESTROYED)}subscribeOnState(e){if(!this.isDestroyed())return this.state$.subscribe(e)}subscribeOnProcess(t){if(!this.isDestroyed())return this.state$.pipe()?.emitByPositive((t=>t===e.PROCESS)).subscribe(t)}isDestroyed(){return this.state===e.DESTROYED}getPositive(e){return this.state$.next(e.state),n(e.state)}}class d extends l{constructor(){super(),this.intervalId=0,this.delay=0}setInterval(s){return this.isDestroyed()?o(e.DESTROYED):this.intervalId?o(e.STARTED):s<0?o(t.NEGATIVE_DELAY):(this.delay=s,this.state$.next(e.INIT),n(e.INIT))}startProcess(){return this.intervalId=setInterval((()=>{this.state$.next(e.PROCESS)}),this.delay),this.state$.next(e.STARTED),n(e.STARTED)}stopProcess(){return clearInterval(this.intervalId),this.intervalId=0,this.state$.next(e.STOPPED),n(e.STOPPED)}}var b=i(735);class D extends l{constructor(){super(...arguments),this.state$=new b.OrderedObservable(e.UNDEFINED)}subscribeOnState(e){if(!this.isDestroyed())return this.state$.subscribe(e)}subscribeOnProcess(t){if(!this.isDestroyed())return this.state$.pipe()?.emitByPositive((t=>t===e.PROCESS)).subscribe(t)}}var p=i(47);function E(e){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E(e)}function y(e,t,s){return(t=function(e){var t=function(e,t){if("object"!=E(e)||!e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var r=s.call(e,"string");if("object"!=E(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==E(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function f(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,r)}return s}function O(e){const t=e._counter;e.countOfUsesPerMinute=t.minutes,e.countOfUsesPerMinuteMax=a(e.countOfUsesPerMinuteMax,t.minutes),e.countOfUsesPerMinuteMin=u(e.countOfUsesPerMinuteMin,t.minutes),e.countOfUsesPerMinuteAvg=h(e.countOfUsesPerMinuteAvg,t.minutes)}function P(e){const t=e._counter;e.countOfUsesPerHour=t.hours,e.countOfUsesPerHourMax=a(e.countOfUsesPerHourMax,t.hours),e.countOfUsesPerHourMin=u(e.countOfUsesPerHourMin,t.hours),e.countOfUsesPerHourAvg=h(e.countOfUsesPerHourAvg,t.hours)}function T(e){const t=e._counter;e.countOfUsesPerDay=t.days,e.countOfUsesPerDayMax=a(e.countOfUsesPerDayMax,t.days),e.countOfUsesPerDayMin=u(e.countOfUsesPerDayMin,t.days),e.countOfUsesPerDayAvg=h(e.countOfUsesPerDayAvg,t.days)}const S=window;S.GTimeout=class extends l{constructor(){super(),this.delay=0,this.timerId=0}setTimeout(s){return this.isDestroyed()?o(e.DESTROYED):this.timerId?o(e.STARTED):s<0?o(t.NEGATIVE_DELAY):(this.delay=s,this.state$.next(e.INIT),n(e.INIT))}startProcess(){return this.timerId=setTimeout((()=>{this.state$.next(e.PROCESS),this.state$.next(e.STOPPED)}),this.delay),this.state$.next(e.STARTED),n(e.STARTED)}stopProcess(){return clearTimeout(this.timerId),this.timerId=0,this.state$.next(e.STOPPED),n(e.STOPPED)}},S.GTimeoutOrdered=class extends D{constructor(){super(),this.delay=0,this.timerId=0}setTimeout(s){return this.isDestroyed()?o(e.DESTROYED):this.timerId?o(e.STARTED):s<0?o(t.NEGATIVE_DELAY):(this.delay=s,this.state$.next(e.INIT),n(e.INIT))}startProcess(){return this.timerId=setTimeout((()=>{this.state$.next(e.PROCESS),this.state$.next(e.STOPPED)}),this.delay),this.state$.next(e.STARTED),n(e.STARTED)}stopProcess(){return clearTimeout(this.timerId),this.timerId=0,this.state$.next(e.STOPPED),n(e.STOPPED)}},S.GInterval=d,S.GIntervalOrdered=class extends D{constructor(){super(),this.intervalId=0,this.delay=0}setInterval(s){return this.isDestroyed()?o(e.DESTROYED):this.intervalId?o(e.STARTED):s<0?o(t.NEGATIVE_DELAY):(this.delay=s,this.state$.next(e.INIT),n(e.INIT))}startProcess(){return this.intervalId=setInterval((()=>{this.state$.next(e.PROCESS)}),this.delay),this.state$.next(e.STARTED),n(e.STARTED)}stopProcess(){return clearInterval(this.intervalId),this.intervalId=0,this.state$.next(e.STOPPED),n(e.STOPPED)}},S.GAnimationFrame=class extends l{constructor(){super(),this.fps=60,this.rafId=null}setFPS(s){return this.isDestroyed()?o(e.DESTROYED):this.rafId?o(e.STARTED):s<1?o(t.NEGATIVE_DELAY):(this.fps=s,n(this.state))}set60fps(){return this.setFPS(60)}set30fps(){return this.setFPS(30)}setDefault(){return this.setFPS(60)}startProcess(){if(this.rafId)return o(e.STARTED);let t=Math.floor(performance.now());const s=Math.floor(1e3/this.fps),r=i=>{i=Math.floor(i),this.rafId=requestAnimationFrame(r);const n=i-t;n>=s&&(t=i-n%s,this.state$.next(e.PROCESS))};return this.rafId=requestAnimationFrame(r),this.state$.next(e.STARTED),n(e.STARTED)}stopProcess(){return this.rafId?(cancelAnimationFrame(this.rafId),this.rafId=null,this.state$.next(e.STOPPED),n(e.STOPPED)):o(t.NEGATIVE_DELAY)}},S.GAnimationFrameOrdered=class extends D{constructor(){super(),this.rafId=null,this.fps=60,this.rafId=null}setFPS(s){return this.isDestroyed()?o(e.DESTROYED):this.rafId?o(e.STARTED):s<1?o(t.NEGATIVE_DELAY):(this.fps=s,n(this.state))}set60fps(){return this.setFPS(60)}set30fps(){return this.setFPS(30)}setDefault(){return this.setFPS(60)}startProcess(){if(this.rafId)return o(e.STARTED);let t=Math.floor(performance.now());const s=Math.floor(1e3/this.fps),r=i=>{i=Math.floor(i),this.rafId=requestAnimationFrame(r);const n=i-t;n>=s&&(t=i-n%s,this.state$.next(e.PROCESS))};return this.rafId=requestAnimationFrame(r),this.state$.next(e.STARTED),n(e.STARTED)}stopProcess(){return this.rafId?(cancelAnimationFrame(this.rafId),this.rafId=null,this.state$.next(e.STOPPED),n(e.STOPPED)):o(t.NEGATIVE_DELAY)}},S.TickCounter=class{constructor(t){this.subject=t,this._state=e.UNDEFINED,this.defaultPeriodMs=1e3,this.periodMs=0,this.sum=0,this.counter=0,this.counter$=new p.cP(this.counter),this.init()}init(){this._state=e.INIT,this.resetPeriod()}get state(){return this._state}getTicksPerPeriod(){return this.counter}getTicksSum(){return this.sum}resetPeriod(){return this.isDestroyed()&&o(t.INSTANCE_DESTROYED),this.state===e.STARTED&&o(this.state),this.periodMs=this.defaultPeriodMs,n(this.state)}setPeriod(s){return this.isDestroyed()&&o(t.INSTANCE_DESTROYED),this.state===e.STARTED&&o(this.state),"number"!=typeof s||s<0?{isApplied:!1,state:t.TYPE_INVALID}:(this.periodMs=s,n(this.state))}subscribe(e){if(!this.isDestroyed())return this.counter$.subscribe(e)}start(){this.isDestroyed()&&o(t.INSTANCE_DESTROYED),this.state===e.STARTED&&o(this.state);let s=0;return this.subscriber=this.subject.subscribeOnProcess((()=>{s++,this.sum++})),this.timer=setInterval((()=>{this.counter=s,s=0,this.counter$.next(this.counter),this._state=e.READY}),this.periodMs),this._state=e.STARTED,n(this.state)}stop(){return this.isDestroyed()&&o(t.INSTANCE_DESTROYED),this.timer&&clearInterval(this.timer),this.subscriber?.unsubscribe(),this.counter=0,this.sum=0,this._state=e.STOPPED,n(this.state)}isDestroyed(){return this._state===e.DESTROYED}destroy(){return this.stop(),this.counter$.destroy(),this._state=e.DESTROYED,n(this.state)}},S.GMeter=class{constructor(){this.metrics={},this._state=e.STOPPED,this.perSecondTimer=new d,this.perSecondTimer.setInterval(1e3),this.perMinuteTimer=new d,this.perMinuteTimer.setInterval(6e4),this.perHourTimer=new d,this.perHourTimer.setInterval(36e5),this.perDayTimer=new d,this.perDayTimer.setInterval(864e5)}start(){return this.isDestroyed()?o(t.INSTANCE_DESTROYED):(this.perSecondTimer.start(),this.perMinuteTimer.start(),this.perHourTimer.start(),this.perDayTimer.start(),this._state=e.PROCESS,n(e.PROCESS))}stop(){if(this.isDestroyed())return o(t.INSTANCE_DESTROYED);this.perSecondTimer.stop(),this.perMinuteTimer.stop(),this.perHourTimer.stop(),this.perDayTimer.stop();for(const e in this.metrics){const t=this.metrics[e];t._counter.days=0,t._counter.hours=0,t._counter.minutes=0,t._counter.seconds=0}return this._state=e.STOPPED,n(e.STOPPED)}destroy(){return this.isDestroyed()?o(t.INSTANCE_DESTROYED):(this.stop(),this.clearFunc(),this.perSecondTimer.destroy(),this.perMinuteTimer.destroy(),this.perHourTimer.destroy(),this.perDayTimer.destroy(),this._state=e.DESTROYED,n(e.DESTROYED))}isDestroyed(){return this._state===e.DESTROYED}deleteFunc(s){if(this.isDestroyed())return o(t.INSTANCE_DESTROYED);if(s in this.metrics){const t=this.metrics[s];return t._deleteObj.isDeleted=!0,t._deleteObj=null,delete this.metrics[s],n(e.DELETED)}return o(t.NAME_IS_NOT_PRESENT)}clearFunc(){const e=[];for(const t in this.metrics)e.push(t);for(const t of e)this.deleteFunc(t)}decorate(e,t){const{deleteObj:s,metric:r}=this.createMetric(e);return(...e)=>{if(s.isDeleted)return t(...e);const i=Date.now();r.countOfUses++,r._counter.seconds++,r._counter.minutes++,r._counter.hours++,r._counter.days++;try{return t(...e)}catch(e){throw s.isDeleted||r.countOfErrors++,e}finally{s.isDeleted||(r.timePerCall=Date.now()-i,r.totalExecutionTime+=r.timePerCall)}}}createMetric(e){if(e in this.metrics)throw new Error(`A function with the name "${e}" is already decorated`);if(this.isDestroyed())throw new Error(t.INSTANCE_DESTROYED);const s={isDeleted:!1};this.metrics[e]={countOfUses:0,countOfErrors:0,totalExecutionTime:0,timePerCall:0,countOfUsesPerSecond:0,countOfUsesPerMinute:0,countOfUsesPerHour:0,countOfUsesPerDay:0,countOfUsesPerDayAvg:0,countOfUsesPerDayMax:0,countOfUsesPerDayMin:0,countOfUsesPerHourAvg:0,countOfUsesPerHourMax:0,countOfUsesPerHourMin:0,countOfUsesPerMinuteAvg:0,countOfUsesPerMinuteMax:0,countOfUsesPerMinuteMin:0,countOfUsesPerSecondAvg:0,countOfUsesPerSecondMax:0,countOfUsesPerSecondMin:0,_deleteObj:s,_counter:{seconds:0,minutes:0,hours:0,days:0}};const r=this.metrics[e];return this.addTimers(s,r),{deleteObj:s,metric:r}}decorateAsync(e,t){const{deleteObj:s,metric:r}=this.createMetric(e);return async(...e)=>{if(s.isDeleted)return await t(...e);const i=Date.now();r.countOfUses++,r._counter.seconds++,r._counter.minutes++,r._counter.hours++,r._counter.days++;try{return await t(...e)}catch(e){throw s.isDeleted||r.countOfErrors++,e}finally{s.isDeleted||(r.timePerCall=Date.now()-i,r.totalExecutionTime+=r.timePerCall)}}}addTimers(e,t){const s=t._counter;this.addTimer(e,this.perSecondTimer,(()=>{!function(e){const t=e._counter;e.countOfUsesPerSecond=t.seconds,e.countOfUsesPerSecondMax=a(e.countOfUsesPerSecondMax,t.seconds),e.countOfUsesPerSecondMin=u(e.countOfUsesPerSecondMin,t.seconds),e.countOfUsesPerSecondAvg=h(e.countOfUsesPerSecondAvg,t.seconds)}(t),O(t),P(t),T(t),s.seconds=0})),this.addTimer(e,this.perMinuteTimer,(()=>{O(t),P(t),T(t),s.minutes=0})),this.addTimer(e,this.perHourTimer,(()=>{P(t),T(t),s.hours=0})),this.addTimer(e,this.perDayTimer,(()=>{T(t),s.days=0}))}addTimer(e,t,s){const r=t.subscribeOnProcess((()=>{e.isDeleted?r?.unsubscribe():s()}))}getMetrics(e){const t=function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?f(Object(s),!0).forEach((function(t){y(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):f(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({},this.metrics[e]);return delete t._deleteObj,delete t._counter,t}getAll(){const e={};for(const t in this.metrics)e[t]=this.getMetrics(t);return e}get length(){return Object.keys(this.metrics).length}get state(){return this._state}}})();