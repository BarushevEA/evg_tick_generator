(()=>{"use strict";var t={951:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.randomCallback=e.positiveCallback=e.negativeCallback=e.quickDeleteFromArray=e.deleteFromArray=void 0,e.deleteFromArray=function(t,e){const s=t.indexOf(e);return-1!==s&&(t.splice(s,1),!0)},e.quickDeleteFromArray=function(t,e){const s=t.indexOf(e);return-1!==s&&(t[s]=t[t.length-1],t.length=t.length-1,!0)},e.negativeCallback=()=>!1,e.positiveCallback=()=>!0,e.randomCallback=()=>"772716b8-e6e2-47ac-95e9-e8d99ce35124"},390:(t,e,s)=>{e.cP=void 0;const i=s(951);class r{isMarkedForUnsubscribe=!1;observable;listener;errorHandler=(t,e)=>{console.log(`(Unit of SubscribeObject).send(${t}) ERROR:`,e)};_order=0;isListenPaused=!1;once={isOnce:!1,isFinished:!1};unsubscribeByNegativeCondition=null;unsubscribeByPositiveCondition=null;emitByNegativeCondition=null;emitByPositiveCondition=null;emitMatchCondition=null;isPipe=!1;constructor(t,e){this.observable=t,this.isPipe=!!e}static callbackSend(t,e){const s=e.listener;return s&&e.observable?e.isListenPaused?void 0:e.isPipe?e.emitByPositiveCondition&&e.emitByPositiveCondition(t)||e.emitByNegativeCondition&&!e.emitByNegativeCondition(t)?s(t):e.once.isOnce?(e.once.isFinished=!0,s(t),e.unsubscribe()):e.unsubscribeByNegativeCondition?e.unsubscribeByNegativeCondition(t)?s(t):(e.unsubscribeByNegativeCondition=null,e.unsubscribe()):e.unsubscribeByPositiveCondition?e.unsubscribeByPositiveCondition(t)?(e.unsubscribeByPositiveCondition=null,e.unsubscribe()):s(t):e.emitMatchCondition&&e.emitMatchCondition(t)===t?s(t):void 0:s(t):e.unsubscribe()}subscribe(t,e){return this.listener=t,e&&(this.errorHandler=e),this}unsubscribe(){this.observable&&(this.observable.unSubscribe(this),this.observable=null,this.listener=null)}send(t){try{r.callbackSend(t,this)}catch(e){this.errorHandler(t,e)}}setOnce(){return this.once.isOnce=!0,this}unsubscribeByNegative(t){return this.unsubscribeByNegativeCondition=t??i.negativeCallback,this}unsubscribeByPositive(t){return this.unsubscribeByPositiveCondition=t??i.positiveCallback,this}emitByNegative(t){return this.emitByNegativeCondition=t??i.positiveCallback,this}emitByPositive(t){return this.emitByPositiveCondition=t??i.negativeCallback,this}emitMatch(t){return this.emitMatchCondition=t??i.randomCallback,this}resume(){this.isListenPaused=!1}pause(){this.isListenPaused=!0}get order(){return this._order}set order(t){this._order=t}}e.cP=class{value;listeners=[];_isEnable=!0;_isDestroyed=!1;isNextProcess=!1;listenersForUnsubscribe=[];constructor(t){this.value=t}disable(){this._isEnable=!1}enable(){this._isEnable=!0}get isEnable(){return this._isEnable}next(t){if(!this._isDestroyed&&this._isEnable){this.isNextProcess=!0,this.value=t;for(let e=0;e<this.listeners.length;e++)this.listeners[e].send(t);this.isNextProcess=!1,this.listenersForUnsubscribe.length&&this.handleListenersForUnsubscribe()}}stream(t){if(!this._isDestroyed&&this._isEnable)for(let e=0;e<t.length;e++)this.next(t[e])}handleListenersForUnsubscribe(){const t=this.listenersForUnsubscribe.length;for(let e=0;e<t;e++)this.unSubscribe(this.listenersForUnsubscribe[e]);this.listenersForUnsubscribe.length=0}unSubscribe(t){if(!this._isDestroyed){if(this.isNextProcess&&t){const e=t;return!e.isMarkedForUnsubscribe&&this.listenersForUnsubscribe.push(t),void(e.isMarkedForUnsubscribe=!0)}this.listeners&&(0,i.quickDeleteFromArray)(this.listeners,t)}}destroy(){this.value=null,this.unsubscribeAll(),this.listeners=null,this._isDestroyed=!0}unsubscribeAll(){this._isDestroyed||(this.listeners.length=0)}getValue(){if(!this._isDestroyed)return this.value}size(){return this._isDestroyed?0:this.listeners.length}subscribe(t,e){if(this._isDestroyed)return;if(!t)return;const s=new r(this,!1);return s.subscribe(t,e),this.listeners.push(s),s}pipe(){if(this._isDestroyed)return;const t=new r(this,!0);return this.listeners.push(t),t}get isDestroyed(){return this._isDestroyed}}}},e={};function s(i){var r=e[i];if(void 0!==r)return r.exports;var n=e[i]={exports:{}};return t[i](n,n.exports,s),n.exports}(()=>{var t,e;function i(t){return{isApplied:!0,state:t}}function r(t){return{isApplied:!1,state:t}}!function(t){t.INIT="INIT",t.STARTED="STARTED",t.STOPPED="STOPPED",t.PROCESS="PROCESS",t.DESTROYED="DESTROYED",t.UNDEFINED="UNDEFINED"}(t||(t={})),function(t){t.ERROR_NEGATIVE_DELAY="Delay must be a positive number."}(e||(e={}));var n=s(390);class o{constructor(){this.state$=new n.cP(t.UNDEFINED)}get state(){return this.state$.isDestroyed?t.DESTROYED:this.state$.getValue()??t.UNDEFINED}start(){if(this.isDestroyed())return r(t.DESTROYED);const e=this.startProcess();return e.isApplied?this.getPositive(e):e}stop(){if(this.isDestroyed())return r(t.DESTROYED);const e=this.stopProcess();return e.isApplied?this.getPositive(e):e}destroy(){return this.stop(),this.state$.next(t.DESTROYED),this.state$.destroy(),i(t.DESTROYED)}subscribeOnState(t){if(!this.isDestroyed())return this.state$.subscribe(t)}subscribeOnProcess(e){if(!this.isDestroyed())return this.state$.pipe()?.emitByPositive((e=>e===t.PROCESS)).subscribe(e)}isDestroyed(){return this.state===t.DESTROYED}getPositive(t){return this.state$.next(t.state),i(t.state)}}const a=window;a.GTimeout=class extends o{constructor(){super(),this.delay=0,this.timerId=0}setTimeout(s){const n=this.state;return this.isDestroyed()?r(t.DESTROYED):n===t.STARTED?r(n):s<0?r(e.ERROR_NEGATIVE_DELAY):(this.delay=s,this.state$.next(t.INIT),i(t.INIT))}startProcess(){return this.timerId=setTimeout((()=>{this.state$.next(t.PROCESS),this.state$.next(t.STOPPED)}),this.delay),i(t.STARTED)}stopProcess(){return clearTimeout(this.timerId),i(t.STOPPED)}},a.GInterval=class extends o{constructor(){super(),this.intervalId=0,this.delay=0}setInterval(s){const n=this.state;return this.isDestroyed()?r(t.DESTROYED):n===t.STARTED?r(n):s<0?r(e.ERROR_NEGATIVE_DELAY):(this.delay=s,this.state$.next(t.INIT),i(t.INIT))}startProcess(){return this.intervalId=setInterval((()=>{this.state$.next(t.PROCESS)}),this.delay),i(t.STARTED)}stopProcess(){return clearInterval(this.intervalId),i(t.STOPPED)}},a.GAnimationFrame=class extends o{constructor(t){super(),this.rafId=null,this.fps=60,this.rafId=t}setFPS(s){const n=this.state;return this.isDestroyed()?r(t.DESTROYED):n===t.STARTED?r(n):s<1?r(e.ERROR_NEGATIVE_DELAY):(this.fps=s,i(this.state))}set60fps(){return this.setFPS(60)}set30fps(){return this.setFPS(30)}setDefault(){return this.setFPS(60)}startProcess(){if(this.rafId)return r(t.STARTED);let e=Math.floor(performance.now());const s=Math.floor(1e3/this.fps),n=i=>{i=Math.floor(i),this.rafId=requestAnimationFrame(n);const r=i-e;r>=s&&(e=i-r%s,this.state$.next(t.PROCESS))};return this.rafId=requestAnimationFrame(n),i(t.STARTED)}stopProcess(){return this.rafId?(cancelAnimationFrame(this.rafId),this.rafId=null,i(t.STOPPED)):r(e.ERROR_NEGATIVE_DELAY)}}})()})();